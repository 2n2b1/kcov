<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Coverage - kcov</title>
  <link rel="stylesheet" type="text/css" href="bcov.css"/>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr><td class="title">Coverage Report</td></tr>
  <tr><td class="ruler"><img src="glass.png" width="3" height="3" alt=""/></td></tr>
  <tr>
    <td width="100%">
      <table cellpadding="1" border="0" width="100%">
        <tr>
          <td class="headerItem" width="20%">Command:</td>
          <td class="headerValue" width="80%" colspan=6>kcov</td>
        </tr>
        <tr>
          <td class="headerItem" width="20%">Date:</td>
          <td class="headerValue" width="15%">2014-03-01 10:11:51</td>
          <td width="5%"></td>
          <td class="headerItem" width="20%">Instrumented&nbsp;lines:</td>
          <td class="headerValue" width="10%">299</td>
        </tr>
        <tr>
          <td class="headerItem" width="20%">Code&nbsp;covered:</td>
          <td class="coverPerLeftHi" width="15%">80.3%</td>
          <td width="5%"></td>
          <td class="headerItem" width="20%">Executed&nbsp;lines:</td>
          <td class="headerValue" width="10%">240</td>
        </tr>
      </table>
    </td>
  </tr>
  <tr><td class="ruler"><img src="glass.png" width="3" height="3" alt=""/></td></tr>
</table>
<pre class="source">
<span class="lineNum">    1</span>              : #include &lt;reporter.hh&gt; </span>
<span class="lineNum">    2</span>              : #include &lt;file-parser.hh&gt; </span>
<span class="lineNum">    3</span>              : #include &lt;configuration.hh&gt; </span>
<span class="lineNum">    4</span>              : #include &lt;writer.hh&gt; </span>
<span class="lineNum">    5</span>              : #include &lt;utils.hh&gt; </span>
<span class="lineNum">    6</span>              : #include &lt;output-handler.hh&gt; </span>
<span class="lineNum">    7</span>              :  </span>
<span class="lineNum">    8</span>              : #include &lt;sys&#047;stat.h&gt; </span>
<span class="lineNum">    9</span>              : #include &lt;sys&#047;types.h&gt; </span>
<span class="lineNum">   10</span>              : #include &lt;dirent.h&gt; </span>
<span class="lineNum">   11</span>              : #include &lt;stdio.h&gt; </span>
<span class="lineNum">   12</span>              : #include &lt;string&gt; </span>
<span class="lineNum">   13</span>              : #include &lt;list&gt; </span>
<span class="lineNum">   14</span>              : #include &lt;unordered_map&gt; </span>
<span class="lineNum">   15</span>              :  </span>
<span class="lineNum">   16</span>              : #include &quot;writer-base.hh&quot; </span>
<span class="lineNum">   17</span>              :  </span>
<span class="lineNum">   18</span>              : using namespace kcov; </span>
<span class="lineNum">   19</span>              :  </span>
<span class="lineNum">   20</span>              :  </span>
<span class="lineNum">   21</span>              : static const uint8_t icon_ruby[] = </span>
<span class="lineNum">   22</span>              :   { 0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, 0x00, 0x00, 0x00, 0x0d, </span>
<span class="lineNum">   23</span>              : 0x49, 0x48, 0x44, 0x52, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x03, 0x00, 0x00, 0x00, </span>
<span class="lineNum">   24</span>              : 0x25, 0xdb, 0x56, 0xca, 0x00, 0x00, 0x00, 0x07, 0x74, 0x49, 0x4d, 0x45, 0x07, 0xd2, 0x07, 0x11, 0x0f, </span>
<span class="lineNum">   25</span>              : 0x18, 0x10, 0x5d, 0x57, 0x34, 0x6e, 0x00, 0x00, 0x00, 0x09, 0x70, 0x48, 0x59, 0x73, 0x00, 0x00, 0x0b, </span>
<span class="lineNum">   26</span>              : 0x12, 0x00, 0x00, 0x0b, 0x12, 0x01, 0xd2, 0xdd, 0x7e, 0xfc, 0x00, 0x00, 0x00, 0x04, 0x67, 0x41, 0x4d, </span>
<span class="lineNum">   27</span>              : 0x41, 0x00, 0x00, 0xb1, 0x8f, 0x0b, 0xfc, 0x61, 0x05, 0x00, 0x00, 0x00, 0x06, 0x50, 0x4c, 0x54, 0x45, </span>
<span class="lineNum">   28</span>              : 0xff, 0x35, 0x2f, 0x00, 0x00, 0x00, 0xd0, 0x33, 0x9a, 0x9d, 0x00, 0x00, 0x00, 0x0a, 0x49, 0x44, 0x41, </span>
<span class="lineNum">   29</span>              : 0x54, 0x78, 0xda, 0x63, 0x60, 0x00, 0x00, 0x00, 0x02, 0x00, 0x01, 0xe5, 0x27, 0xde, 0xfc, 0x00, 0x00, </span>
<span class="lineNum">   30</span>              : 0x00, 0x00, 0x49, 0x45, 0x4e, 0x44, 0xae, 0x42, 0x60, 0x82 }; </span>
<span class="lineNum">   31</span>              :  </span>
<span class="lineNum">   32</span>              : static const uint8_t icon_amber[] = </span>
<span class="lineNum">   33</span>              :   { 0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, 0x00, 0x00, 0x00, 0x0d, </span>
<span class="lineNum">   34</span>              : 0x49, 0x48, 0x44, 0x52, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x03, 0x00, 0x00, 0x00, </span>
<span class="lineNum">   35</span>              : 0x25, 0xdb, 0x56, 0xca, 0x00, 0x00, 0x00, 0x07, 0x74, 0x49, 0x4d, 0x45, 0x07, 0xd2, 0x07, 0x11, 0x0f, </span>
<span class="lineNum">   36</span>              : 0x28, 0x04, 0x98, 0xcb, 0xd6, 0xe0, 0x00, 0x00, 0x00, 0x09, 0x70, 0x48, 0x59, 0x73, 0x00, 0x00, 0x0b, </span>
<span class="lineNum">   37</span>              : 0x12, 0x00, 0x00, 0x0b, 0x12, 0x01, 0xd2, 0xdd, 0x7e, 0xfc, 0x00, 0x00, 0x00, 0x04, 0x67, 0x41, 0x4d, </span>
<span class="lineNum">   38</span>              : 0x41, 0x00, 0x00, 0xb1, 0x8f, 0x0b, 0xfc, 0x61, 0x05, 0x00, 0x00, 0x00, 0x06, 0x50, 0x4c, 0x54, 0x45, </span>
<span class="lineNum">   39</span>              : 0xff, 0xe0, 0x50, 0x00, 0x00, 0x00, 0xa2, 0x7a, 0xda, 0x7e, 0x00, 0x00, 0x00, 0x0a, 0x49, 0x44, 0x41, </span>
<span class="lineNum">   40</span>              : 0x54, 0x78, 0xda, 0x63, 0x60, 0x00, 0x00, 0x00, 0x02, 0x00, 0x01, 0xe5, 0x27, 0xde, 0xfc, 0x00, 0x00, </span>
<span class="lineNum">   41</span>              : 0x00, 0x00, 0x49, 0x45, 0x4e, 0x44, 0xae, 0x42, 0x60, 0x82 }; </span>
<span class="lineNum">   42</span>              :  </span>
<span class="lineNum">   43</span>              : static const uint8_t icon_emerald[] = </span>
<span class="lineNum">   44</span>              :   { 0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, 0x00, 0x00, 0x00, 0x0d, </span>
<span class="lineNum">   45</span>              : 0x49, 0x48, 0x44, 0x52, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x03, 0x00, 0x00, 0x00, 0x25, </span>
<span class="lineNum">   46</span>              : 0xdb, 0x56, 0xca, 0x00, 0x00, 0x00, 0x07, 0x74, 0x49, 0x4d, 0x45, 0x07, 0xd2, 0x07, 0x11, 0x0f, 0x22, 0x2b, </span>
<span class="lineNum">   47</span>              : 0xc9, 0xf5, 0x03, 0x33, 0x00, 0x00, 0x00, 0x09, 0x70, 0x48, 0x59, 0x73, 0x00, 0x00, 0x0b, 0x12, 0x00, 0x00, </span>
<span class="lineNum">   48</span>              : 0x0b, 0x12, 0x01, 0xd2, 0xdd, 0x7e, 0xfc, 0x00, 0x00, 0x00, 0x04, 0x67, 0x41, 0x4d, 0x41, 0x00, 0x00, 0xb1, </span>
<span class="lineNum">   49</span>              : 0x8f, 0x0b, 0xfc, 0x61, 0x05, 0x00, 0x00, 0x00, 0x06, 0x50, 0x4c, 0x54, 0x45, 0x1b, 0xea, 0x59, 0x0a, 0x0a, </span>
<span class="lineNum">   50</span>              : 0x0a, 0x0f, 0xba, 0x50, 0x83, 0x00, 0x00, 0x00, 0x0a, 0x49, 0x44, 0x41, 0x54, 0x78, 0xda, 0x63, 0x60, 0x00, </span>
<span class="lineNum">   51</span>              : 0x00, 0x00, 0x02, 0x00, 0x01, 0xe5, 0x27, 0xde, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4e, 0x44, 0xae, </span>
<span class="lineNum">   52</span>              : 0x42, 0x60, 0x82 }; </span>
<span class="lineNum">   53</span>              :  </span>
<span class="lineNum">   54</span>              : static const uint8_t icon_snow[] = </span>
<span class="lineNum">   55</span>              :   { 0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, 0x00, 0x00, 0x00, 0x0d, </span>
<span class="lineNum">   56</span>              : 0x49, 0x48, 0x44, 0x52, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x03, 0x00, 0x00, 0x00, </span>
<span class="lineNum">   57</span>              : 0x25, 0xdb, 0x56, 0xca, 0x00, 0x00, 0x00, 0x07, 0x74, 0x49, 0x4d, 0x45, 0x07, 0xd2, 0x07, 0x11, 0x0f, </span>
<span class="lineNum">   58</span>              : 0x1e, 0x1d, 0x75, 0xbc, 0xef, 0x55, 0x00, 0x00, 0x00, 0x09, 0x70, 0x48, 0x59, 0x73, 0x00, 0x00, 0x0b, </span>
<span class="lineNum">   59</span>              : 0x12, 0x00, 0x00, 0x0b, 0x12, 0x01, 0xd2, 0xdd, 0x7e, 0xfc, 0x00, 0x00, 0x00, 0x04, 0x67, 0x41, 0x4d, </span>
<span class="lineNum">   60</span>              : 0x41, 0x00, 0x00, 0xb1, 0x8f, 0x0b, 0xfc, 0x61, 0x05, 0x00, 0x00, 0x00, 0x06, 0x50, 0x4c, 0x54, 0x45, </span>
<span class="lineNum">   61</span>              : 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x55, 0xc2, 0xd3, 0x7e, 0x00, 0x00, 0x00, 0x0a, 0x49, 0x44, 0x41, </span>
<span class="lineNum">   62</span>              : 0x54, 0x78, 0xda, 0x63, 0x60, 0x00, 0x00, 0x00, 0x02, 0x00, 0x01, 0xe5, 0x27, 0xde, 0xfc, 0x00, 0x00, </span>
<span class="lineNum">   63</span>              : 0x00, 0x00, 0x49, 0x45, 0x4e, 0x44, 0xae, 0x42, 0x60, 0x82 }; </span>
<span class="lineNum">   64</span>              :  </span>
<span class="lineNum">   65</span>              : static const uint8_t icon_glass[] = </span>
<span class="lineNum">   66</span>              :   { 0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, 0x00, 0x00, 0x00, 0x0d, </span>
<span class="lineNum">   67</span>              : 0x49, 0x48, 0x44, 0x52, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x03, 0x00, 0x00, 0x00, </span>
<span class="lineNum">   68</span>              : 0x25, 0xdb, 0x56, 0xca, 0x00, 0x00, 0x00, 0x04, 0x67, 0x41, 0x4d, 0x41, 0x00, 0x00, 0xb1, 0x8f, 0x0b, </span>
<span class="lineNum">   69</span>              : 0xfc, 0x61, 0x05, 0x00, 0x00, 0x00, 0x06, 0x50, 0x4c, 0x54, 0x45, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, </span>
<span class="lineNum">   70</span>              : 0x55, 0xc2, 0xd3, 0x7e, 0x00, 0x00, 0x00, 0x01, 0x74, 0x52, 0x4e, 0x53, 0x00, 0x40, 0xe6, 0xd8, 0x66, </span>
<span class="lineNum">   71</span>              : 0x00, 0x00, 0x00, 0x01, 0x62, 0x4b, 0x47, 0x44, 0x00, 0x88, 0x05, 0x1d, 0x48, 0x00, 0x00, 0x00, 0x09, </span>
<span class="lineNum">   72</span>              : 0x70, 0x48, 0x59, 0x73, 0x00, 0x00, 0x0b, 0x12, 0x00, 0x00, 0x0b, 0x12, 0x01, 0xd2, 0xdd, 0x7e, 0xfc, </span>
<span class="lineNum">   73</span>              : 0x00, 0x00, 0x00, 0x07, 0x74, 0x49, 0x4d, 0x45, 0x07, 0xd2, 0x07, 0x13, 0x0f, 0x08, 0x19, 0xc4, 0x40, </span>
<span class="lineNum">   74</span>              : 0x56, 0x10, 0x00, 0x00, 0x00, 0x0a, 0x49, 0x44, 0x41, 0x54, 0x78, 0x9c, 0x63, 0x60, 0x00, 0x00, 0x00, </span>
<span class="lineNum">   75</span>              : 0x02, 0x00, 0x01, 0x48, 0xaf, 0xa4, 0x71, 0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4e, 0x44, 0xae, 0x42, </span>
<span class="lineNum">   76</span>              : 0x60, 0x82 }; </span>
<span class="lineNum">   77</span>              :  </span>
<span class="lineNum">   78</span>              : static const char css_text[] = &quot;&#047;* Based upon the lcov CSS style, style files can be reused *&#047;&#092;n&quot; </span>
<span class="lineNum">   79</span>              : 		&quot;body { color: #000000; background-color: #FFFFFF; }&#092;n&quot; </span>
<span class="lineNum">   80</span>              : 		&quot;a:link { color: #284FA8; text-decoration: underline; }&#092;n&quot; </span>
<span class="lineNum">   81</span>              : 		&quot;a:visited { color: #00CB40; text-decoration: underline; }&#092;n&quot; </span>
<span class="lineNum">   82</span>              : 		&quot;a:active { color: #FF0040; text-decoration: underline; }&#092;n&quot; </span>
<span class="lineNum">   83</span>              : 		&quot;td.title { text-align: center; padding-bottom: 10px; font-size: 20pt; font-weight: bold; }&#092;n&quot; </span>
<span class="lineNum">   84</span>              : 		&quot;td.ruler { background-color: #6688D4; }&#092;n&quot; </span>
<span class="lineNum">   85</span>              : 		&quot;td.headerItem { text-align: right; padding-right: 6px; font-family: sans-serif; font-weight: bold; }&#092;n&quot; </span>
<span class="lineNum">   86</span>              : 		&quot;td.headerValue { text-align: left; color: #284FA8; font-family: sans-serif; font-weight: bold; }&#092;n&quot; </span>
<span class="lineNum">   87</span>              : 		&quot;td.versionInfo { text-align: center; padding-top:  2px; }&#092;n&quot; </span>
<span class="lineNum">   88</span>              : 		&quot;pre.source { font-family: monospace; white-space: pre; }&#092;n&quot; </span>
<span class="lineNum">   89</span>              : 		&quot;span.lineNum { background-color: #EFE383; }&#092;n&quot; </span>
<span class="lineNum">   90</span>              : 		&quot;span.lineCov { background-color: #CAD7FE; }&#092;n&quot; </span>
<span class="lineNum">   91</span>              : 		&quot;span.linePartCov { background-color: #FFEA20; }&#092;n&quot; </span>
<span class="lineNum">   92</span>              : 		&quot;span.lineNoCov { background-color: #FF6230; }&#092;n&quot; </span>
<span class="lineNum">   93</span>              : 		&quot;td.tableHead { text-align: center; color: #FFFFFF; background-color: #6688D4; font-family: sans-serif; font-size: 120%; font-weight: bold; }&#092;n&quot; </span>
<span class="lineNum">   94</span>              : 		&quot;td.coverFile { text-align: left; padding-left: 10px; padding-right: 20px; color: #284FA8; background-color: #DAE7FE; font-family: monospace; }&#092;n&quot; </span>
<span class="lineNum">   95</span>              : 		&quot;td.coverBar { padding-left: 10px; padding-right: 10px; background-color: #DAE7FE; }&#092;n&quot; </span>
<span class="lineNum">   96</span>              : 		&quot;td.coverBarOutline { background-color: #000000; }&#092;n&quot; </span>
<span class="lineNum">   97</span>              : 		&quot;td.coverPerHi { text-align: right; padding-left: 10px; padding-right: 10px; background-color: #A7FC9D; font-weight: bold; }&#092;n&quot; </span>
<span class="lineNum">   98</span>              : 		&quot;td.coverPerLeftMed { text-align: left; padding-left: 10px; padding-right: 10px; background-color: #FFEA20; font-weight: bold; }&#092;n&quot; </span>
<span class="lineNum">   99</span>              : 		&quot;td.coverPerLeftLo { text-align: left; padding-left: 10px; padding-right: 10px; background-color: #FF0000; font-weight: bold; }&#092;n&quot; </span>
<span class="lineNum">  100</span>              : 		&quot;td.coverPerLeftHi { text-align: left; padding-left: 10px; padding-right: 10px; background-color: #A7FC9D; font-weight: bold; }&#092;n&quot; </span>
<span class="lineNum">  101</span>              : 		&quot;td.coverNumHi { text-align: right; padding-left: 10px; padding-right: 10px; background-color: #A7FC9D; }&#092;n&quot; </span>
<span class="lineNum">  102</span>              : 		&quot;td.coverPerMed { text-align: right; padding-left: 10px; padding-right: 10px; background-color: #FFEA20; font-weight: bold; }&#092;n&quot; </span>
<span class="lineNum">  103</span>              : 		&quot;td.coverNumMed { text-align: right; padding-left: 10px; padding-right: 10px; background-color: #FFEA20; }&#092;n&quot; </span>
<span class="lineNum">  104</span>              : 		&quot;td.coverPerLo { text-align: right; padding-left: 10px; padding-right: 10px; background-color: #FF0000; font-weight: bold; }&#092;n&quot; </span>
<span class="lineNum">  105</span>              : 		&quot;td.coverNumLo { text-align: right; padding-left: 10px; padding-right: 10px; background-color: #FF0000; }&#092;n&quot;; </span>
<span class="lineNum">  106</span>              :  </span>
<span class="lineNum">  107</span>              :  </span>
<span class="lineNum">  108</span><span class="lineNoCov">      0  /   8: class HtmlWriter : public WriterBase </span>
<span class="lineNum">  109</span>              : { </span>
<span class="lineNum">  110</span>              : public: </span>
<span class="lineNum">  111</span><span class="lineCov">      1  /   1: 	HtmlWriter(IFileParser &amp;parser, IReporter &amp;reporter, IOutputHandler &amp;output) : </span>
<span class="lineNum">  112</span><span class="linePartCov">      1  /   2: 		WriterBase(parser, reporter, output) </span>
<span class="lineNum">  113</span>              : 	{ </span>
<span class="lineNum">  114</span><span class="linePartCov">      1  /   2: 		m_indexDirectory = output.getBaseDirectory(); </span>
<span class="lineNum">  115</span><span class="linePartCov">      1  /   2: 		m_outDirectory = output.getOutDirectory(); </span>
<span class="lineNum">  116</span><span class="linePartCov">      1  /   2: 		m_summaryDbFileName = m_outDirectory + &quot;summary.db&quot;; </span>
<span class="lineNum">  117</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  118</span>              :  </span>
<span class="lineNum">  119</span><span class="linePartCov">      2  /   3: 	void onStop() </span>
<span class="lineNum">  120</span>              : 	{ </span>
<span class="lineNum">  121</span><span class="lineCov">      1  /   1: 	} </span>
<span class="lineNum">  122</span>              :  </span>
<span class="lineNum">  123</span>              : private: </span>
<span class="lineNum">  124</span>              :  </span>
<span class="lineNum">  125</span><span class="lineCov">      1  /   1: 	void writeOne(File *file) </span>
<span class="lineNum">  126</span>              : 	{ </span>
<span class="lineNum">  127</span><span class="lineCov">      1  /   1: 		enum IConfiguration::OutputType type = IConfiguration::getInstance().getOutputType(); </span>
<span class="lineNum">  128</span><span class="lineCov">      1  /   1: 		std::string outName = m_outDirectory + &quot;&#047;&quot; + file-&gt;m_outFileName; </span>
<span class="lineNum">  129</span><span class="lineCov">      1  /   1: 		uint64_t nTotalExecutedAddresses = 0; </span>
<span class="lineNum">  130</span><span class="lineCov">      1  /   1: 		unsigned int nExecutedLines = 0; </span>
<span class="lineNum">  131</span><span class="lineCov">      1  /   1: 		unsigned int nCodeLines = 0; </span>
<span class="lineNum">  132</span>              :  </span>
<span class="lineNum">  133</span>              : 		std::string s = </span>
<span class="lineNum">  134</span><span class="linePartCov">      2  /   3: 				&quot;&lt;pre class=&#092;&quot;source&#092;&quot;&gt;&#092;n&quot;; </span>
<span class="lineNum">  135</span><span class="lineCov">      1  /   1: 		if (type == IConfiguration::OUTPUT_PROFILER) { </span>
<span class="lineNum">  136</span><span class="lineNoCov">      0  /   2: 			for (unsigned int n = 1; n &lt; file-&gt;m_lastLineNr; n++) { </span>
<span class="lineNum">  137</span>              : 				IReporter::LineExecutionCount cnt = </span>
<span class="lineNum">  138</span><span class="lineNoCov">      0  /   1: 						m_reporter.getLineExecutionCount(file-&gt;m_name.c_str(), n); </span>
<span class="lineNum">  139</span>              :  </span>
<span class="lineNum">  140</span><span class="lineNoCov">      0  /   1: 				nTotalExecutedAddresses += cnt.m_hits; </span>
<span class="lineNum">  141</span>              : 			} </span>
<span class="lineNum">  142</span>              : 		} </span>
<span class="lineNum">  143</span>              :  </span>
<span class="lineNum">  144</span><span class="lineCov">      2  /   2: 		for (unsigned int n = 1; n &lt; file-&gt;m_lastLineNr; n++) { </span>
<span class="lineNum">  145</span><span class="lineCov">      1  /   1: 			std::string line = file-&gt;m_lineMap[n]; </span>
<span class="lineNum">  146</span>              :  </span>
<span class="lineNum">  147</span><span class="linePartCov">      1  /   2: 			s += &quot;&lt;span class=&#092;&quot;lineNum&#092;&quot;&gt;&quot; + fmt(&quot;%5u&quot;, n) + &quot;&lt;&#047;span&gt;&quot;; </span>
<span class="lineNum">  148</span>              :  </span>
<span class="lineNum">  149</span><span class="lineCov">      1  /   1: 			if (!m_reporter.lineIsCode(file-&gt;m_name.c_str(), n)) { </span>
<span class="lineNum">  150</span><span class="lineCov">      1  /   1: 				if (type == IConfiguration::OUTPUT_COVERAGE) </span>
<span class="lineNum">  151</span><span class="linePartCov">      1  /   2: 					s += &quot;              : &quot; + escapeHtml(line) + &quot;&lt;&#047;span&gt;&#092;n&quot;; </span>
<span class="lineNum">  152</span>              : 				else </span>
<span class="lineNum">  153</span><span class="lineNoCov">      0  /   2: 					s += &quot;                : &quot; + escapeHtml(line) + &quot;&lt;&#047;span&gt;&#092;n&quot;; </span>
<span class="lineNum">  154</span><span class="lineCov">      1  /   1: 				continue; </span>
<span class="lineNum">  155</span>              : 			} </span>
<span class="lineNum">  156</span>              :  </span>
<span class="lineNum">  157</span>              : 			IReporter::LineExecutionCount cnt = </span>
<span class="lineNum">  158</span><span class="lineCov">      1  /   1: 					m_reporter.getLineExecutionCount(file-&gt;m_name.c_str(), n); </span>
<span class="lineNum">  159</span>              :  </span>
<span class="lineNum">  160</span><span class="linePartCov">      2  /   3: 			std::string lineClass = &quot;lineNoCov&quot;; </span>
<span class="lineNum">  161</span>              :  </span>
<span class="lineNum">  162</span><span class="lineCov">      1  /   1: 			if (type == IConfiguration::OUTPUT_COVERAGE) </span>
<span class="lineNum">  163</span><span class="lineCov">      1  /   1: 				nExecutedLines += !!cnt.m_hits; </span>
<span class="lineNum">  164</span>              : 			else </span>
<span class="lineNum">  165</span><span class="lineNoCov">      0  /   1: 				nExecutedLines += cnt.m_hits; </span>
<span class="lineNum">  166</span><span class="lineCov">      1  /   1: 			nCodeLines++; </span>
<span class="lineNum">  167</span>              :  </span>
<span class="lineNum">  168</span><span class="lineCov">      1  /   1: 			if (cnt.m_hits == cnt.m_possibleHits) </span>
<span class="lineNum">  169</span><span class="lineCov">      1  /   1: 				lineClass = &quot;lineCov&quot;; </span>
<span class="lineNum">  170</span><span class="lineCov">      1  /   1: 			else if (cnt.m_hits) </span>
<span class="lineNum">  171</span><span class="lineNoCov">      0  /   1: 				lineClass = &quot;linePartCov&quot;; </span>
<span class="lineNum">  172</span>              :  </span>
<span class="lineNum">  173</span><span class="lineCov">      1  /   1: 			if (type == IConfiguration::OUTPUT_COVERAGE) { </span>
<span class="lineNum">  174</span><span class="linePartCov">      2  /   3: 				s += &quot;&lt;span class=&#092;&quot;&quot; + lineClass + &quot;&#092;&quot;&gt;    &quot; + </span>
<span class="lineNum">  175</span><span class="linePartCov">      4  /   6: 						fmt(&quot;%3u&quot;, cnt.m_hits) + &quot;  &#047; &quot; + fmt(&quot;%3u&quot;, cnt.m_possibleHits) + &quot;: &quot; + </span>
<span class="lineNum">  176</span><span class="linePartCov">      2  /   3: 						escapeHtml(line) + </span>
<span class="lineNum">  177</span><span class="lineCov">      1  /   1: 						&quot;&lt;&#047;span&gt;&#092;n&quot;; </span>
<span class="lineNum">  178</span>              : 			} else { </span>
<span class="lineNum">  179</span><span class="lineNoCov">      0  /   1: 				double percentage = 0; </span>
<span class="lineNum">  180</span>              :  </span>
<span class="lineNum">  181</span><span class="lineNoCov">      0  /   1: 				if (nTotalExecutedAddresses != 0) </span>
<span class="lineNum">  182</span><span class="lineNoCov">      0  /   1: 					percentage = ((double)cnt.m_hits &#047; (double)nTotalExecutedAddresses) * 100; </span>
<span class="lineNum">  183</span>              :  </span>
<span class="lineNum">  184</span><span class="lineNoCov">      0  /   1: 				unsigned int red = 21; </span>
<span class="lineNum">  185</span><span class="lineNoCov">      0  /   1: 				unsigned int green = 129; </span>
<span class="lineNum">  186</span><span class="lineNoCov">      0  /   1: 				unsigned int blue = 148; </span>
<span class="lineNum">  187</span>              :  </span>
<span class="lineNum">  188</span><span class="lineNoCov">      0  /   1: 				if (percentage &gt; 0 &amp;&amp; percentage &lt; 5) { </span>
<span class="lineNum">  189</span><span class="lineNoCov">      0  /   1: 					red = 71; green = 157; blue = 117; </span>
<span class="lineNum">  190</span><span class="lineNoCov">      0  /   1: 				} else if (percentage &gt;= 5 &amp;&amp; percentage &lt; 15) { </span>
<span class="lineNum">  191</span><span class="lineNoCov">      0  /   1: 					red = 123; green = 195; blue = 73; </span>
<span class="lineNum">  192</span><span class="lineNoCov">      0  /   1: 				} else if (percentage &gt;= 15 &amp;&amp; percentage &lt; 30) { </span>
<span class="lineNum">  193</span><span class="lineNoCov">      0  /   1: 					red = 209; green = 214; blue = 0; </span>
<span class="lineNum">  194</span><span class="lineNoCov">      0  /   1: 				} else if (percentage &gt;= 30 &amp;&amp; percentage &lt; 45) { </span>
<span class="lineNum">  195</span><span class="lineNoCov">      0  /   1: 					red = 240; green = 151; blue = 0; </span>
<span class="lineNum">  196</span><span class="lineNoCov">      0  /   1: 				} else if (percentage &gt;= 45) { </span>
<span class="lineNum">  197</span><span class="lineNoCov">      0  /   1: 					red = 252; green = 107; blue = 0; </span>
<span class="lineNum">  198</span>              : 				} </span>
<span class="lineNum">  199</span>              :  </span>
<span class="lineNum">  200</span><span class="lineNoCov">      0  /   3: 				s += &quot;&lt;span style=&#092;&quot;background-color:&quot; + fmt(&quot;#%02x%02x%02x&quot;, red, green, blue) + &quot;&#092;&quot;&gt;&quot; + </span>
<span class="lineNum">  201</span><span class="lineNoCov">      0  /   6: 						fmt(&quot;%8u&quot;, cnt.m_hits) + &quot; &#047; &quot; + fmt(&quot;%3u%%&quot;, (unsigned int)percentage) + &quot; &lt;&#047;span&gt;: &quot; + </span>
<span class="lineNum">  202</span><span class="lineNoCov">      0  /   6: 						&quot;&lt;span&gt;&quot; + </span>
<span class="lineNum">  203</span><span class="lineNoCov">      0  /   3: 						escapeHtml(line) + </span>
<span class="lineNum">  204</span><span class="lineNoCov">      0  /   1: 						&quot;&lt;&#047;span&gt;&#092;n&quot;; </span>
<span class="lineNum">  205</span>              : 			} </span>
<span class="lineNum">  206</span><span class="linePartCov">      1  /   2: 		} </span>
<span class="lineNum">  207</span><span class="lineCov">      1  /   1: 		s += &quot;&lt;&#047;pre&gt;&#092;n&quot;; </span>
<span class="lineNum">  208</span>              :  </span>
<span class="lineNum">  209</span><span class="linePartCov">      1  /   2: 		s = getHeader(nCodeLines, nExecutedLines) + s + getFooter(file); </span>
<span class="lineNum">  210</span>              :  </span>
<span class="lineNum">  211</span><span class="lineCov">      1  /   1: 		write_file((void *)s.c_str(), s.size(), outName.c_str()); </span>
<span class="lineNum">  212</span>              :  </span>
<span class="lineNum">  213</span>              : 		&#047;&#047; Update the execution count </span>
<span class="lineNum">  214</span><span class="lineCov">      1  /   1: 		file-&gt;m_executedLines = nExecutedLines; </span>
<span class="lineNum">  215</span><span class="linePartCov">      2  /   3: 		file-&gt;m_codeLines = nCodeLines; </span>
<span class="lineNum">  216</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  217</span>              :  </span>
<span class="lineNum">  218</span><span class="lineCov">      1  /   1: 	void writeIndex() </span>
<span class="lineNum">  219</span>              : 	{ </span>
<span class="lineNum">  220</span><span class="lineCov">      1  /   1: 		enum IConfiguration::OutputType type = IConfiguration::getInstance().getOutputType(); </span>
<span class="lineNum">  221</span><span class="lineCov">      1  /   1: 		unsigned int nTotalExecutedLines = 0; </span>
<span class="lineNum">  222</span><span class="lineCov">      1  /   1: 		unsigned int nTotalCodeLines = 0; </span>
<span class="lineNum">  223</span><span class="lineCov">      1  /   1: 		uint64_t nTotalExecutedAddresses = 0; </span>
<span class="lineNum">  224</span><span class="lineCov">      1  /   1: 		std::string s; </span>
<span class="lineNum">  225</span>              :  </span>
<span class="lineNum">  226</span><span class="linePartCov">      2  /   3: 		std::multimap&lt;double, std::string&gt; fileListByPercent; </span>
<span class="lineNum">  227</span><span class="linePartCov">      2  /   3: 		std::multimap&lt;double, std::string&gt; fileListByUncoveredLines; </span>
<span class="lineNum">  228</span><span class="linePartCov">      2  /   3: 		std::multimap&lt;double, std::string&gt; fileListByFileLength; </span>
<span class="lineNum">  229</span><span class="linePartCov">      2  /   3: 		std::map&lt;std::string, std::string&gt; fileListByName; </span>
<span class="lineNum">  230</span>              :  </span>
<span class="lineNum">  231</span><span class="lineCov">      1  /   1: 		if (type == IConfiguration::OUTPUT_PROFILER) { </span>
<span class="lineNum">  232</span><span class="lineNoCov">      0  /   2: 			for (const auto &amp;it : m_files) { </span>
<span class="lineNum">  233</span><span class="lineNoCov">      0  /   1: 				auto file = it.second; </span>
<span class="lineNum">  234</span>              :  </span>
<span class="lineNum">  235</span><span class="lineNoCov">      0  /   1: 				nTotalExecutedAddresses += file-&gt;m_executedLines; </span>
<span class="lineNum">  236</span>              : 			} </span>
<span class="lineNum">  237</span>              : 		} </span>
<span class="lineNum">  238</span><span class="lineCov">      2  /   2: 		for (const auto &amp;it : m_files) { </span>
<span class="lineNum">  239</span><span class="lineCov">      1  /   1: 			auto file = it.second; </span>
<span class="lineNum">  240</span><span class="lineCov">      1  /   1: 			unsigned int nExecutedLines = file-&gt;m_executedLines; </span>
<span class="lineNum">  241</span><span class="lineCov">      1  /   1: 			unsigned int nCodeLines = file-&gt;m_codeLines; </span>
<span class="lineNum">  242</span><span class="lineCov">      1  /   1: 			double percent = 0; </span>
<span class="lineNum">  243</span>              :  </span>
<span class="lineNum">  244</span><span class="lineCov">      1  /   1: 			if (type == IConfiguration::OUTPUT_COVERAGE) { </span>
<span class="lineNum">  245</span><span class="lineCov">      1  /   1: 				if (nCodeLines != 0) </span>
<span class="lineNum">  246</span><span class="lineCov">      1  /   1: 					percent = ((double)nExecutedLines &#047; (double)nCodeLines) * 100; </span>
<span class="lineNum">  247</span>              :  </span>
<span class="lineNum">  248</span><span class="lineCov">      1  /   1: 				nTotalCodeLines += nCodeLines; </span>
<span class="lineNum">  249</span><span class="lineCov">      1  /   1: 				nTotalExecutedLines += nExecutedLines; </span>
<span class="lineNum">  250</span>              : 			} else { </span>
<span class="lineNum">  251</span><span class="lineNoCov">      0  /   1: 				if (nExecutedLines == 0) </span>
<span class="lineNum">  252</span>              : 					continue; </span>
<span class="lineNum">  253</span>              :  </span>
<span class="lineNum">  254</span>              : 				&#047;&#047; Profiler </span>
<span class="lineNum">  255</span><span class="lineNoCov">      0  /   1: 				percent = ((double)nExecutedLines &#047; (double)nTotalExecutedAddresses) * 100; </span>
<span class="lineNum">  256</span>              : 			} </span>
<span class="lineNum">  257</span>              :  </span>
<span class="lineNum">  258</span><span class="lineCov">      1  /   1: 			std::string coverPer = strFromPercentage(percent); </span>
<span class="lineNum">  259</span>              :  </span>
<span class="lineNum">  260</span><span class="linePartCov">      2  /   3: 			std::string listName = file-&gt;m_name; </span>
<span class="lineNum">  261</span>              :  </span>
<span class="lineNum">  262</span><span class="lineCov">      1  /   1: 			size_t pos = listName.find(m_commonPath); </span>
<span class="lineNum">  263</span><span class="lineCov">      1  /   1: 			unsigned int stripLevel = IConfiguration::getInstance().getPathStripLevel(); </span>
<span class="lineNum">  264</span>              :  </span>
<span class="lineNum">  265</span><span class="lineCov">      1  /   1: 			if (pos != std::string::npos &amp;&amp; m_commonPath.size() != 0 &amp;&amp; stripLevel != ~0U) { </span>
<span class="lineNum">  266</span><span class="lineCov">      1  /   1: 				std::string pathToRemove = m_commonPath; </span>
<span class="lineNum">  267</span>              :  </span>
<span class="lineNum">  268</span><span class="lineCov">      2  /   2: 				for (unsigned int i = 0; i &lt; stripLevel; i++) { </span>
<span class="lineNum">  269</span><span class="lineCov">      1  /   1: 					size_t slashPos = pathToRemove.rfind(&quot;&#047;&quot;); </span>
<span class="lineNum">  270</span>              :  </span>
<span class="lineNum">  271</span><span class="lineCov">      1  /   1: 					if (slashPos == std::string::npos) </span>
<span class="lineNum">  272</span><span class="lineNoCov">      0  /   1: 						break; </span>
<span class="lineNum">  273</span><span class="linePartCov">      1  /   2: 					pathToRemove = pathToRemove.substr(0, slashPos); </span>
<span class="lineNum">  274</span>              : 				} </span>
<span class="lineNum">  275</span>              :  </span>
<span class="lineNum">  276</span><span class="linePartCov">      2  /   3: 				std::string prefix = &quot;[...]&quot;; </span>
<span class="lineNum">  277</span>              :  </span>
<span class="lineNum">  278</span><span class="lineCov">      1  /   1: 				if (pathToRemove == &quot;&quot;) </span>
<span class="lineNum">  279</span><span class="lineNoCov">      0  /   1: 					prefix = &quot;&quot;; </span>
<span class="lineNum">  280</span><span class="linePartCov">      2  /   4: 				listName = prefix + listName.substr(pathToRemove.size()); </span>
<span class="lineNum">  281</span>              : 			} </span>
<span class="lineNum">  282</span>              :  </span>
<span class="lineNum">  283</span>              : 			std::string cur = </span>
<span class="lineNum">  284</span>              : 				&quot;    &lt;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  285</span><span class="lineCov">      1  /   1: 				&quot;      &lt;td class=&#092;&quot;coverFile&#092;&quot;&gt;&lt;a href=&#092;&quot;&quot; + file-&gt;m_outFileName + &quot;&#092;&quot; title=&#092;&quot;&quot; + file-&gt;m_fileName + &quot;&#092;&quot;&gt;&quot; + listName + &quot;&lt;&#047;a&gt;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  286</span>              : 				&quot;      &lt;td class=&#092;&quot;coverBar&#092;&quot; align=&#092;&quot;center&#092;&quot;&gt;&#092;n&quot; </span>
<span class="lineNum">  287</span><span class="lineCov">      2  /   2: 				&quot;        &lt;table border=&#092;&quot;0&#092;&quot; cellspacing=&#092;&quot;0&#092;&quot; cellpadding=&#092;&quot;1&#092;&quot;&gt;&lt;tr&gt;&lt;td class=&#092;&quot;coverBarOutline&#092;&quot;&gt;&quot; + constructBar(percent) + &quot;&lt;&#047;td&gt;&lt;&#047;tr&gt;&lt;&#047;table&gt;&#092;n&quot; </span>
<span class="lineNum">  288</span><span class="linePartCov">      2  /   3: 				&quot;      &lt;&#047;td&gt;&#092;n&quot;; </span>
<span class="lineNum">  289</span><span class="lineCov">      1  /   1: 			if (type == IConfiguration::OUTPUT_COVERAGE) </span>
<span class="lineNum">  290</span><span class="linePartCov">      2  /   3: 				cur += &quot;      &lt;td class=&#092;&quot;coverPer&quot; + coverPer + &quot;&#092;&quot;&gt;&quot; + fmt(&quot;%.1f&quot;, percent) + &quot;&amp;nbsp;%&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  291</span><span class="linePartCov">      4  /   6: 				&quot;      &lt;td class=&#092;&quot;coverNum&quot; + coverPer + &quot;&#092;&quot;&gt;&quot; + fmt(&quot;%u&quot;, nExecutedLines) + &quot;&amp;nbsp;&#047;&amp;nbsp;&quot; + fmt(&quot;%u&quot;, nCodeLines) + &quot;&amp;nbsp;lines&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  292</span><span class="lineCov">      1  /   1: 				&quot;    &lt;&#047;tr&gt;&#092;n&quot;; </span>
<span class="lineNum">  293</span>              : 			else </span>
<span class="lineNum">  294</span><span class="lineNoCov">      0  /   3: 				cur += &quot;      &lt;td class=&#092;&quot;coverPer&quot; + coverPer + &quot;&#092;&quot;&gt;&quot; + fmt(&quot;%.1f&quot;, percent) + &quot;&amp;nbsp;%&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  295</span><span class="lineNoCov">      0  /   1: 				&quot;    &lt;&#047;tr&gt;&#092;n&quot;; </span>
<span class="lineNum">  296</span>              :  </span>
<span class="lineNum">  297</span><span class="lineCov">      1  /   1: 			fileListByName[file-&gt;m_name] = cur; </span>
<span class="lineNum">  298</span><span class="linePartCov">      1  /   2: 			fileListByPercent.insert(std::pair&lt;double, std::string&gt;(percent, cur)); </span>
<span class="lineNum">  299</span><span class="linePartCov">      1  /   2: 			fileListByUncoveredLines.insert(std::pair&lt;double, std::string&gt;(nCodeLines - nExecutedLines, cur)); </span>
<span class="lineNum">  300</span><span class="linePartCov">      1  /   2: 			fileListByFileLength.insert(std::pair&lt;double, std::string&gt;(nCodeLines, cur)); </span>
<span class="lineNum">  301</span><span class="linePartCov">      1  /   2: 		} </span>
<span class="lineNum">  302</span>              :  </span>
<span class="lineNum">  303</span><span class="lineCov">      1  /   1: 		if (IConfiguration::getInstance().getSortType() == IConfiguration::PERCENTAGE) { </span>
<span class="lineNum">  304</span><span class="lineNoCov">      0  /   2: 			for (const auto &amp;it : fileListByPercent) </span>
<span class="lineNum">  305</span><span class="lineNoCov">      0  /   2: 				s = s + it.second; </span>
<span class="lineNum">  306</span>              : 		} </span>
<span class="lineNum">  307</span><span class="lineCov">      1  /   1: 		else if (IConfiguration::getInstance().getSortType() == IConfiguration::REVERSE_PERCENTAGE) { </span>
<span class="lineNum">  308</span><span class="lineNoCov">      0  /   2: 			for (const auto &amp;it : fileListByPercent) </span>
<span class="lineNum">  309</span><span class="lineNoCov">      0  /   2: 				s = it.second + s; </span>
<span class="lineNum">  310</span>              : 		} </span>
<span class="lineNum">  311</span><span class="lineCov">      1  /   1: 		else if (IConfiguration::getInstance().getSortType() == IConfiguration::UNCOVERED_LINES) { </span>
<span class="lineNum">  312</span><span class="lineNoCov">      0  /   2: 			for (const auto &amp;it : fileListByUncoveredLines) </span>
<span class="lineNum">  313</span><span class="lineNoCov">      0  /   2: 				s = it.second + s; &#047;&#047; Sort backwards </span>
<span class="lineNum">  314</span>              : 		} </span>
<span class="lineNum">  315</span><span class="lineCov">      1  /   1: 		else if (IConfiguration::getInstance().getSortType() == IConfiguration::FILE_LENGTH) { </span>
<span class="lineNum">  316</span><span class="lineNoCov">      0  /   2: 			for (const auto &amp;it : fileListByFileLength) </span>
<span class="lineNum">  317</span><span class="lineNoCov">      0  /   2: 				s = it.second + s; &#047;&#047; Ditto </span>
<span class="lineNum">  318</span>              : 		} </span>
<span class="lineNum">  319</span>              : 		else { </span>
<span class="lineNum">  320</span><span class="lineCov">      2  /   2: 			for (const auto &amp;it : fileListByName) </span>
<span class="lineNum">  321</span><span class="linePartCov">      1  /   2: 				s = s + it.second; </span>
<span class="lineNum">  322</span>              : 		} </span>
<span class="lineNum">  323</span>              :  </span>
<span class="lineNum">  324</span><span class="linePartCov">      1  /   2: 		s = getHeader(nTotalCodeLines, nTotalExecutedLines) + getIndexHeader() + s + getFooter(nullptr); </span>
<span class="lineNum">  325</span>              :  </span>
<span class="lineNum">  326</span><span class="linePartCov">      1  /   2: 		write_file((void *)s.c_str(), s.size(), (m_outDirectory + &quot;index.html&quot;).c_str()); </span>
<span class="lineNum">  327</span>              :  </span>
<span class="lineNum">  328</span>              : 		&#047;&#047; Produce a summary </span>
<span class="lineNum">  329</span><span class="lineCov">      1  /   1: 		IReporter::ExecutionSummary summary = m_reporter.getExecutionSummary(); </span>
<span class="lineNum">  330</span>              : 		size_t sz; </span>
<span class="lineNum">  331</span>              :  </span>
<span class="lineNum">  332</span>              : 		void *data = marshalSummary(summary, </span>
<span class="lineNum">  333</span><span class="lineCov">      1  /   1: 				IConfiguration::getInstance().getBinaryName(), &amp;sz); </span>
<span class="lineNum">  334</span>              :  </span>
<span class="lineNum">  335</span><span class="lineCov">      1  /   1: 		if (data) </span>
<span class="lineNum">  336</span><span class="lineCov">      1  /   1: 			write_file(data, sz, &quot;%s&quot;, m_summaryDbFileName.c_str()); </span>
<span class="lineNum">  337</span>              :  </span>
<span class="lineNum">  338</span><span class="linePartCov">      2  /   3: 		free(data); </span>
<span class="lineNum">  339</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  340</span>              :  </span>
<span class="lineNum">  341</span><span class="lineCov">      1  /   1: 	void writeGlobalIndex() </span>
<span class="lineNum">  342</span>              : 	{ </span>
<span class="lineNum">  343</span>              : 		DIR *dir; </span>
<span class="lineNum">  344</span>              : 		struct dirent *de; </span>
<span class="lineNum">  345</span><span class="lineCov">      1  /   1: 		std::string idx = m_indexDirectory.c_str(); </span>
<span class="lineNum">  346</span><span class="linePartCov">      2  /   3: 		std::string s; </span>
<span class="lineNum">  347</span><span class="lineCov">      1  /   1: 		unsigned int nTotalExecutedLines = 0; </span>
<span class="lineNum">  348</span><span class="lineCov">      1  /   1: 		unsigned int nTotalCodeLines = 0; </span>
<span class="lineNum">  349</span>              :  </span>
<span class="lineNum">  350</span><span class="lineCov">      1  /   1: 		dir = opendir(idx.c_str()); </span>
<span class="lineNum">  351</span><span class="lineCov">      1  /   1: 		panic_if(!dir, &quot;Can&#039;t open directory %s&#092;n&quot;, idx.c_str()); </span>
<span class="lineNum">  352</span>              :  </span>
<span class="lineNum">  353</span><span class="lineCov">      2  /   2: 		for (de = readdir(dir); de; de = readdir(dir)) { </span>
<span class="lineNum">  354</span><span class="lineCov">      1  /   1: 			std::string cur = idx + de-&gt;d_name + &quot;&#047;summary.db&quot;; </span>
<span class="lineNum">  355</span>              :  </span>
<span class="lineNum">  356</span><span class="lineCov">      1  /   1: 			if (!file_exists(cur.c_str())) </span>
<span class="lineNum">  357</span><span class="lineCov">      1  /   1: 				continue; </span>
<span class="lineNum">  358</span>              :  </span>
<span class="lineNum">  359</span>              : 			size_t sz; </span>
<span class="lineNum">  360</span><span class="lineCov">      1  /   1: 			void *data = read_file(&amp;sz, &quot;%s&quot;, cur.c_str()); </span>
<span class="lineNum">  361</span>              :  </span>
<span class="lineNum">  362</span><span class="lineCov">      1  /   1: 			if (!data) </span>
<span class="lineNum">  363</span><span class="lineNoCov">      0  /   1: 				continue; </span>
<span class="lineNum">  364</span>              :  </span>
<span class="lineNum">  365</span><span class="lineCov">      1  /   1: 			IReporter::ExecutionSummary summary; </span>
<span class="lineNum">  366</span><span class="linePartCov">      2  /   3: 			std::string name; </span>
<span class="lineNum">  367</span><span class="lineCov">      1  /   1: 			bool res = unMarshalSummary(data, sz, summary, name); </span>
<span class="lineNum">  368</span><span class="lineCov">      1  /   1: 			free(data); </span>
<span class="lineNum">  369</span>              :  </span>
<span class="lineNum">  370</span><span class="lineCov">      1  /   1: 			if (!res) </span>
<span class="lineNum">  371</span><span class="lineNoCov">      0  /   1: 				continue; </span>
<span class="lineNum">  372</span>              :  </span>
<span class="lineNum">  373</span>              :  </span>
<span class="lineNum">  374</span><span class="lineCov">      1  /   1: 			double percent = 0; </span>
<span class="lineNum">  375</span>              :  </span>
<span class="lineNum">  376</span><span class="lineCov">      1  /   1: 			if (summary.m_lines != 0) </span>
<span class="lineNum">  377</span><span class="lineCov">      1  /   1: 				percent = (summary.m_executedLines &#047; (double)summary.m_lines) * 100; </span>
<span class="lineNum">  378</span><span class="lineCov">      1  /   1: 			nTotalCodeLines += summary.m_lines; </span>
<span class="lineNum">  379</span><span class="lineCov">      1  /   1: 			nTotalExecutedLines += summary.m_executedLines; </span>
<span class="lineNum">  380</span>              :  </span>
<span class="lineNum">  381</span><span class="linePartCov">      2  /   3: 			std::string coverPer = strFromPercentage(percent); </span>
<span class="lineNum">  382</span>              :  </span>
<span class="lineNum">  383</span>              : 			s += </span>
<span class="lineNum">  384</span>              : 					&quot;    &lt;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  385</span><span class="linePartCov">      2  /   3: 					&quot;      &lt;td class=&#092;&quot;coverFile&#092;&quot;&gt;&lt;a href=&#092;&quot;&quot; + std::string(de-&gt;d_name) + &quot;&#047;index.html&#092;&quot; title=&#092;&quot;&quot; + name + &quot;&#092;&quot;&gt;&quot; + name + &quot;&lt;&#047;a&gt;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  386</span>              : 					&quot;      &lt;td class=&#092;&quot;coverBar&#092;&quot; align=&#092;&quot;center&#092;&quot;&gt;&#092;n&quot; </span>
<span class="lineNum">  387</span><span class="linePartCov">      4  /   6: 					&quot;        &lt;table border=&#092;&quot;0&#092;&quot; cellspacing=&#092;&quot;0&#092;&quot; cellpadding=&#092;&quot;1&#092;&quot;&gt;&lt;tr&gt;&lt;td class=&#092;&quot;coverBarOutline&#092;&quot;&gt;&quot; + constructBar(percent) + &quot;&lt;&#047;td&gt;&lt;&#047;tr&gt;&lt;&#047;table&gt;&#092;n&quot; </span>
<span class="lineNum">  388</span>              : 					&quot;      &lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  389</span><span class="linePartCov">      4  /   6: 					&quot;      &lt;td class=&#092;&quot;coverPer&quot; + coverPer + &quot;&#092;&quot;&gt;&quot; + fmt(&quot;%.1f&quot;, percent) + &quot;&amp;nbsp;%&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  390</span><span class="linePartCov">      4  /   6: 					&quot;      &lt;td class=&#092;&quot;coverNum&quot; + coverPer + &quot;&#092;&quot;&gt;&quot; + fmt(&quot;%u&quot;, summary.m_executedLines) + &quot;&amp;nbsp;&#047;&amp;nbsp;&quot; + fmt(&quot;%u&quot;, summary.m_lines) + &quot;&amp;nbsp;lines&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  391</span><span class="lineCov">      1  /   1: 					&quot;    &lt;&#047;tr&gt;&#092;n&quot;; </span>
<span class="lineNum">  392</span>              :  </span>
<span class="lineNum">  393</span><span class="linePartCov">      1  /   2: 		} </span>
<span class="lineNum">  394</span><span class="linePartCov">      1  /   2: 		s = getHeader(nTotalCodeLines, nTotalExecutedLines, false) + getIndexHeader() + s + getFooter(nullptr); </span>
<span class="lineNum">  395</span>              :  </span>
<span class="lineNum">  396</span><span class="linePartCov">      1  /   2: 		write_file((void *)s.c_str(), s.size(), (m_indexDirectory + &quot;index.html&quot;).c_str()); </span>
<span class="lineNum">  397</span><span class="linePartCov">      2  /   3: 		closedir(dir); </span>
<span class="lineNum">  398</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  399</span>              :  </span>
<span class="lineNum">  400</span>              :  </span>
<span class="lineNum">  401</span><span class="linePartCov">      2  /   3: 	void write() </span>
<span class="lineNum">  402</span>              : 	{ </span>
<span class="lineNum">  403</span><span class="lineCov">      2  /   2: 		for (const auto &amp;it : m_files) </span>
<span class="lineNum">  404</span><span class="lineCov">      1  /   1: 			writeOne(it.second); </span>
<span class="lineNum">  405</span>              :  </span>
<span class="lineNum">  406</span><span class="lineCov">      1  /   1: 		setupCommonPaths(); </span>
<span class="lineNum">  407</span>              :  </span>
<span class="lineNum">  408</span><span class="lineCov">      1  /   1: 		writeIndex(); </span>
<span class="lineNum">  409</span>              :  </span>
<span class="lineNum">  410</span><span class="lineCov">      1  /   1: 		writeGlobalIndex(); </span>
<span class="lineNum">  411</span><span class="lineCov">      1  /   1: 	} </span>
<span class="lineNum">  412</span>              :  </span>
<span class="lineNum">  413</span><span class="lineCov">      1  /   1: 	std::string strFromPercentage(double percent) </span>
<span class="lineNum">  414</span>              : 	{ </span>
<span class="lineNum">  415</span><span class="lineCov">      1  /   1: 		IConfiguration &amp;conf = IConfiguration::getInstance(); </span>
<span class="lineNum">  416</span><span class="lineCov">      1  /   1: 		std::string coverPer = &quot;Med&quot;; </span>
<span class="lineNum">  417</span>              :  </span>
<span class="lineNum">  418</span><span class="lineCov">      1  /   1: 		if (percent &gt;= conf.getHighLimit()) </span>
<span class="lineNum">  419</span><span class="lineCov">      1  /   1: 			coverPer = &quot;Hi&quot;; </span>
<span class="lineNum">  420</span><span class="lineNoCov">      0  /   1: 		else if (percent &lt; conf.getLowLimit()) </span>
<span class="lineNum">  421</span><span class="lineNoCov">      0  /   1: 			coverPer = &quot;Lo&quot;; </span>
<span class="lineNum">  422</span>              :  </span>
<span class="lineNum">  423</span><span class="lineCov">      1  /   1: 		return coverPer; </span>
<span class="lineNum">  424</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  425</span>              :  </span>
<span class="lineNum">  426</span><span class="lineCov">      1  /   1: 	std::string getIndexHeader() </span>
<span class="lineNum">  427</span>              : 	{ </span>
<span class="lineNum">  428</span>              : 		return std::string( </span>
<span class="lineNum">  429</span>              : 				&quot;&lt;center&gt;&#092;n&quot; </span>
<span class="lineNum">  430</span>              : 				&quot;  &lt;table width=&#092;&quot;80%&#092;&quot; cellpadding=&#092;&quot;2&#092;&quot; cellspacing=&#092;&quot;1&#092;&quot; border=&#092;&quot;0&#092;&quot;&gt;&#092;n&quot; </span>
<span class="lineNum">  431</span>              : 				&quot;    &lt;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  432</span>              : 				&quot;      &lt;td width=&#092;&quot;50%&#092;&quot;&gt;&lt;br&#047;&gt;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  433</span>              : 				&quot;      &lt;td width=&#092;&quot;15%&#092;&quot;&gt;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  434</span>              : 				&quot;      &lt;td width=&#092;&quot;15%&#092;&quot;&gt;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  435</span>              : 				&quot;      &lt;td width=&#092;&quot;20%&#092;&quot;&gt;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  436</span>              : 				&quot;    &lt;&#047;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  437</span>              : 				&quot;    &lt;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  438</span>              : 				&quot;      &lt;td class=&#092;&quot;tableHead&#092;&quot;&gt;Filename&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  439</span>              : 				&quot;      &lt;td class=&#092;&quot;tableHead&#092;&quot; colspan=&#092;&quot;3&#092;&quot;&gt;Coverage&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  440</span>              : 				&quot;    &lt;&#047;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  441</span><span class="lineCov">      1  /   1: 		); </span>
<span class="lineNum">  442</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  443</span>              :  </span>
<span class="lineNum">  444</span><span class="lineCov">      1  /   1: 	std::string getFooter(File *file) </span>
<span class="lineNum">  445</span>              : 	{ </span>
<span class="lineNum">  446</span>              : 		return std::string( </span>
<span class="lineNum">  447</span>              : 				&quot;&lt;table width=&#092;&quot;100%&#092;&quot; border=&#092;&quot;0&#092;&quot; cellspacing=&#092;&quot;0&#092;&quot; cellpadding=&#092;&quot;0&#092;&quot;&gt;&#092;n&quot; </span>
<span class="lineNum">  448</span>              : 				&quot;  &lt;tr&gt;&lt;td class=&#092;&quot;ruler&#092;&quot;&gt;&lt;img src=&#092;&quot;glass.png&#092;&quot; width=&#092;&quot;3&#092;&quot; height=&#092;&quot;3&#092;&quot; alt=&#092;&quot;&#092;&quot;&#047;&gt;&lt;&#047;td&gt;&lt;&#047;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  449</span>              : 				&quot;  &lt;tr&gt;&lt;td class=&#092;&quot;versionInfo&#092;&quot;&gt;Generated by: &lt;a href=&#092;&quot;http:&#047;&#047;simonkagstrom.github.com&#047;kcov&#047;index.html&#092;&quot;&gt;Kcov&lt;&#047;a&gt;&lt;&#047;td&gt;&lt;&#047;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  450</span>              : 				&quot;&lt;&#047;table&gt;&#092;n&quot; </span>
<span class="lineNum">  451</span>              : 				&quot;&lt;br&#047;&gt;&#092;n&quot; </span>
<span class="lineNum">  452</span>              : 				&quot;&lt;&#047;body&gt;&#092;n&quot; </span>
<span class="lineNum">  453</span>              : 				&quot;&lt;&#047;html&gt;&#092;n&quot; </span>
<span class="lineNum">  454</span><span class="lineCov">      1  /   1: 				); </span>
<span class="lineNum">  455</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  456</span>              :  </span>
<span class="lineNum">  457</span><span class="lineCov">      1  /   1: 	std::string getHeader(unsigned int nCodeLines, unsigned int nExecutedLines, </span>
<span class="lineNum">  458</span>              : 			bool includeCommand = true) </span>
<span class="lineNum">  459</span>              : 	{ </span>
<span class="lineNum">  460</span><span class="lineCov">      1  /   1: 		IConfiguration &amp;conf = IConfiguration::getInstance(); </span>
<span class="lineNum">  461</span><span class="lineCov">      1  /   1: 		std::string percentage_text = &quot;Lo&quot;; </span>
<span class="lineNum">  462</span><span class="lineCov">      1  /   1: 		double percentage = 0; </span>
<span class="lineNum">  463</span>              : 		char date_buf[80]; </span>
<span class="lineNum">  464</span>              : 		time_t t; </span>
<span class="lineNum">  465</span>              : 		struct tm *tm; </span>
<span class="lineNum">  466</span>              :  </span>
<span class="lineNum">  467</span><span class="lineCov">      1  /   1: 		if (nCodeLines != 0) </span>
<span class="lineNum">  468</span><span class="lineCov">      1  /   1: 			percentage = ((double)nExecutedLines &#047; (double)nCodeLines) * 100; </span>
<span class="lineNum">  469</span>              :  </span>
<span class="lineNum">  470</span><span class="lineCov">      1  /   1: 		if (percentage &gt; conf.getLowLimit() &amp;&amp; percentage &lt; conf.getHighLimit()) </span>
<span class="lineNum">  471</span><span class="lineNoCov">      0  /   1: 			percentage_text = &quot;Med&quot;; </span>
<span class="lineNum">  472</span><span class="lineCov">      1  /   1: 		else if (percentage &gt;= conf.getHighLimit()) </span>
<span class="lineNum">  473</span><span class="lineCov">      1  /   1: 			percentage_text = &quot;Hi&quot;; </span>
<span class="lineNum">  474</span>              :  </span>
<span class="lineNum">  475</span><span class="lineCov">      1  /   1: 		t = time(nullptr); </span>
<span class="lineNum">  476</span><span class="lineCov">      1  /   1: 		tm = localtime(&amp;t); </span>
<span class="lineNum">  477</span><span class="lineCov">      1  /   1: 		strftime(date_buf, sizeof(date_buf), &quot;%Y-%m-%d %H:%M:%S&quot;, tm); </span>
<span class="lineNum">  478</span>              :  </span>
<span class="lineNum">  479</span><span class="linePartCov">      2  /   3: 		std::string date(date_buf); </span>
<span class="lineNum">  480</span><span class="linePartCov">      2  /   3: 		std::string instrumentedLines = fmt(&quot;%u&quot;, nCodeLines); </span>
<span class="lineNum">  481</span><span class="linePartCov">      2  /   3: 		std::string lines = fmt(&quot;%u&quot;, nExecutedLines); </span>
<span class="lineNum">  482</span><span class="linePartCov">      2  /   3: 		std::string covered = fmt(&quot;%.1f%%&quot;, percentage); </span>
<span class="lineNum">  483</span>              :  </span>
<span class="lineNum">  484</span><span class="lineCov">      1  /   1: 		if (conf.getOutputType() == IConfiguration::OUTPUT_PROFILER) </span>
<span class="lineNum">  485</span><span class="lineNoCov">      0  /   2: 			covered = fmt(&quot;%u samples&quot;, nExecutedLines); </span>
<span class="lineNum">  486</span>              :  </span>
<span class="lineNum">  487</span><span class="linePartCov">      2  /   3: 		std::string commandStr = &quot;&quot;; </span>
<span class="lineNum">  488</span><span class="lineCov">      1  /   1: 		if (includeCommand) </span>
<span class="lineNum">  489</span>              : 			commandStr = &quot;          &lt;td class=&#092;&quot;headerItem&#092;&quot; width=&#092;&quot;20%&#092;&quot;&gt;Command:&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  490</span><span class="linePartCov">      1  /   2: 					&quot;          &lt;td class=&#092;&quot;headerValue&#092;&quot; width=&#092;&quot;80%&#092;&quot; colspan=6&gt;&quot; + escapeHtml(conf.getBinaryName()) + &quot;&lt;&#047;td&gt;&#092;n&quot;; </span>
<span class="lineNum">  491</span>              :  </span>
<span class="lineNum">  492</span>              : 		return std::string( </span>
<span class="lineNum">  493</span>              : 				&quot;&lt;!DOCTYPE HTML PUBLIC &#092;&quot;-&#047;&#047;W3C&#047;&#047;DTD HTML 4.01 Transitional&#047;&#047;EN&#092;&quot;&gt;&#092;n&quot; </span>
<span class="lineNum">  494</span>              : 				&quot;&lt;html&gt;&#092;n&quot; </span>
<span class="lineNum">  495</span>              : 				&quot;&lt;head&gt;&#092;n&quot; </span>
<span class="lineNum">  496</span><span class="linePartCov">      2  /   3: 				&quot;  &lt;title&gt;Coverage - &quot; + escapeHtml(conf.getBinaryName()) + &quot;&lt;&#047;title&gt;&#092;n&quot; </span>
<span class="lineNum">  497</span>              : 				&quot;  &lt;link rel=&#092;&quot;stylesheet&#092;&quot; type=&#092;&quot;text&#047;css&#092;&quot; href=&#092;&quot;bcov.css&#092;&quot;&#047;&gt;&#092;n&quot; </span>
<span class="lineNum">  498</span>              : 				&quot;&lt;&#047;head&gt;&#092;n&quot; </span>
<span class="lineNum">  499</span>              : 				&quot;&lt;body&gt;&#092;n&quot; </span>
<span class="lineNum">  500</span>              : 				&quot;&lt;table width=&#092;&quot;100%&#092;&quot; border=&#092;&quot;0&#092;&quot; cellspacing=&#092;&quot;0&#092;&quot; cellpadding=&#092;&quot;0&#092;&quot;&gt;&#092;n&quot; </span>
<span class="lineNum">  501</span>              : 				&quot;  &lt;tr&gt;&lt;td class=&#092;&quot;title&#092;&quot;&gt;Coverage Report&lt;&#047;td&gt;&lt;&#047;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  502</span>              : 				&quot;  &lt;tr&gt;&lt;td class=&#092;&quot;ruler&#092;&quot;&gt;&lt;img src=&#092;&quot;glass.png&#092;&quot; width=&#092;&quot;3&#092;&quot; height=&#092;&quot;3&#092;&quot; alt=&#092;&quot;&#092;&quot;&#047;&gt;&lt;&#047;td&gt;&lt;&#047;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  503</span>              : 				&quot;  &lt;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  504</span>              : 				&quot;    &lt;td width=&#092;&quot;100%&#092;&quot;&gt;&#092;n&quot; </span>
<span class="lineNum">  505</span>              : 				&quot;      &lt;table cellpadding=&#092;&quot;1&#092;&quot; border=&#092;&quot;0&#092;&quot; width=&#092;&quot;100%&#092;&quot;&gt;&#092;n&quot; </span>
<span class="lineNum">  506</span><span class="linePartCov">      2  /   3: 				&quot;        &lt;tr&gt;&#092;n&quot; + </span>
<span class="lineNum">  507</span><span class="linePartCov">      2  /   3: 				commandStr + </span>
<span class="lineNum">  508</span>              : 				&quot;        &lt;&#047;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  509</span>              : 				&quot;        &lt;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  510</span>              : 				&quot;          &lt;td class=&#092;&quot;headerItem&#092;&quot; width=&#092;&quot;20%&#092;&quot;&gt;Date:&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  511</span><span class="linePartCov">      4  /   6: 				&quot;          &lt;td class=&#092;&quot;headerValue&#092;&quot; width=&#092;&quot;15%&#092;&quot;&gt;&quot; + escapeHtml(date) + &quot;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  512</span>              : 				&quot;          &lt;td width=&#092;&quot;5%&#092;&quot;&gt;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  513</span>              : 				&quot;          &lt;td class=&#092;&quot;headerItem&#092;&quot; width=&#092;&quot;20%&#092;&quot;&gt;Instrumented&amp;nbsp;lines:&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  514</span><span class="linePartCov">      2  /   3: 				&quot;          &lt;td class=&#092;&quot;headerValue&#092;&quot; width=&#092;&quot;10%&#092;&quot;&gt;&quot; + instrumentedLines + &quot;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  515</span>              : 				&quot;        &lt;&#047;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  516</span>              : 				&quot;        &lt;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  517</span>              : 				&quot;          &lt;td class=&#092;&quot;headerItem&#092;&quot; width=&#092;&quot;20%&#092;&quot;&gt;Code&amp;nbsp;covered:&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  518</span><span class="linePartCov">      2  /   3: 				&quot;          &lt;td class=&#092;&quot;coverPerLeft&quot; + percentage_text + &quot;&#092;&quot; width=&#092;&quot;15%&#092;&quot;&gt;&quot; + covered + &quot;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  519</span>              : 				&quot;          &lt;td width=&#092;&quot;5%&#092;&quot;&gt;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  520</span>              : 				&quot;          &lt;td class=&#092;&quot;headerItem&#092;&quot; width=&#092;&quot;20%&#092;&quot;&gt;Executed&amp;nbsp;lines:&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  521</span><span class="linePartCov">      2  /   3: 				&quot;          &lt;td class=&#092;&quot;headerValue&#092;&quot; width=&#092;&quot;10%&#092;&quot;&gt;&quot; + lines + &quot;&lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  522</span>              : 				&quot;        &lt;&#047;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  523</span>              : 				&quot;      &lt;&#047;table&gt;&#092;n&quot; </span>
<span class="lineNum">  524</span>              : 				&quot;    &lt;&#047;td&gt;&#092;n&quot; </span>
<span class="lineNum">  525</span>              : 				&quot;  &lt;&#047;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  526</span>              : 				&quot;  &lt;tr&gt;&lt;td class=&#092;&quot;ruler&#092;&quot;&gt;&lt;img src=&#092;&quot;glass.png&#092;&quot; width=&#092;&quot;3&#092;&quot; height=&#092;&quot;3&#092;&quot; alt=&#092;&quot;&#092;&quot;&#047;&gt;&lt;&#047;td&gt;&lt;&#047;tr&gt;&#092;n&quot; </span>
<span class="lineNum">  527</span>              : 				&quot;&lt;&#047;table&gt;&#092;n&quot; </span>
<span class="lineNum">  528</span><span class="linePartCov">      2  /   3: 				); </span>
<span class="lineNum">  529</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  530</span>              :  </span>
<span class="lineNum">  531</span><span class="lineCov">      1  /   1: 	std::string constructBar(double percent) </span>
<span class="lineNum">  532</span>              : 	{ </span>
<span class="lineNum">  533</span><span class="lineCov">      1  /   1: 		const char* color = &quot;ruby.png&quot;; </span>
<span class="lineNum">  534</span>              : 		char buf[1024]; </span>
<span class="lineNum">  535</span><span class="lineCov">      1  /   1: 		int width = (int)(percent+0.5); </span>
<span class="lineNum">  536</span><span class="lineCov">      1  /   1: 		IConfiguration &amp;conf = IConfiguration::getInstance(); </span>
<span class="lineNum">  537</span>              :  </span>
<span class="lineNum">  538</span><span class="lineCov">      1  /   1: 		if (percent &gt;= conf.getHighLimit()) </span>
<span class="lineNum">  539</span><span class="lineCov">      1  /   1: 			color = &quot;emerald.png&quot;; </span>
<span class="lineNum">  540</span><span class="lineNoCov">      0  /   1: 		else if (percent &gt; conf.getLowLimit()) </span>
<span class="lineNum">  541</span><span class="lineNoCov">      0  /   1: 			color = &quot;amber.png&quot;; </span>
<span class="lineNum">  542</span><span class="lineNoCov">      0  /   1: 		else if (percent &lt;= 1) </span>
<span class="lineNum">  543</span><span class="lineNoCov">      0  /   1: 			color = &quot;snow.png&quot;; </span>
<span class="lineNum">  544</span>              :  </span>
<span class="lineNum">  545</span><span class="lineCov">      1  /   1: 		xsnprintf(buf, sizeof(buf), </span>
<span class="lineNum">  546</span>              : 				&quot;&lt;img src=&#092;&quot;%s&#092;&quot; width=&#092;&quot;%d&#092;&quot; height=&#092;&quot;10&#092;&quot; alt=&#092;&quot;%.1f%%&#092;&quot;&#047;&gt;&lt;img src=&#092;&quot;snow.png&#092;&quot; width=&#092;&quot;%d&#092;&quot; height=&#092;&quot;10&#092;&quot; alt=&#092;&quot;%.1f%%&#092;&quot;&#047;&gt;&quot;, </span>
<span class="lineNum">  547</span>              : 				color, width, percent, 100 - width, percent); </span>
<span class="lineNum">  548</span>              :  </span>
<span class="lineNum">  549</span><span class="lineCov">      1  /   1: 		return std::string(buf); </span>
<span class="lineNum">  550</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  551</span>              :  </span>
<span class="lineNum">  552</span><span class="lineCov">      1  /   1: 	char *escapeHelper(char *dst, const char *what) </span>
<span class="lineNum">  553</span>              : 	{ </span>
<span class="lineNum">  554</span><span class="lineCov">      1  /   1: 		int len = strlen(what); </span>
<span class="lineNum">  555</span>              :  </span>
<span class="lineNum">  556</span><span class="lineCov">      1  /   1: 		strcpy(dst, what); </span>
<span class="lineNum">  557</span>              :  </span>
<span class="lineNum">  558</span><span class="lineCov">      1  /   1: 		return dst + len; </span>
<span class="lineNum">  559</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  560</span>              :  </span>
<span class="lineNum">  561</span><span class="lineCov">      1  /   1: 	std::string escapeHtml(std::string &amp;str) </span>
<span class="lineNum">  562</span>              : 	{ </span>
<span class="lineNum">  563</span><span class="lineCov">      1  /   1: 		const char *s = str.c_str(); </span>
<span class="lineNum">  564</span>              : 		char buf[4096]; </span>
<span class="lineNum">  565</span><span class="lineCov">      1  /   1: 		char *dst = buf; </span>
<span class="lineNum">  566</span><span class="lineCov">      1  /   1: 		size_t len = strlen(s); </span>
<span class="lineNum">  567</span>              : 		size_t i; </span>
<span class="lineNum">  568</span>              :  </span>
<span class="lineNum">  569</span><span class="lineCov">      1  /   1: 		memset(buf, 0, sizeof(buf)); </span>
<span class="lineNum">  570</span><span class="lineCov">      2  /   2: 		for (i = 0; i &lt; len; i++) { </span>
<span class="lineNum">  571</span><span class="lineCov">      1  /   1: 			char c = s[i]; </span>
<span class="lineNum">  572</span>              :  </span>
<span class="lineNum">  573</span><span class="lineCov">      1  /   1: 			switch (c) { </span>
<span class="lineNum">  574</span>              : 			case &#039;&lt;&#039;: </span>
<span class="lineNum">  575</span><span class="lineCov">      1  /   1: 				dst = escapeHelper(dst, &quot;&amp;lt;&quot;); </span>
<span class="lineNum">  576</span><span class="lineCov">      1  /   1: 				break; </span>
<span class="lineNum">  577</span>              : 			case &#039;&gt;&#039;: </span>
<span class="lineNum">  578</span><span class="lineCov">      1  /   1: 				dst = escapeHelper(dst, &quot;&amp;gt;&quot;); </span>
<span class="lineNum">  579</span><span class="lineCov">      1  /   1: 				break; </span>
<span class="lineNum">  580</span>              : 			case &#039;&amp;&#039;: </span>
<span class="lineNum">  581</span><span class="lineNoCov">      0  /   1: 				dst = escapeHelper(dst, &quot;&amp;amp;&quot;); </span>
<span class="lineNum">  582</span><span class="lineNoCov">      0  /   1: 				break; </span>
<span class="lineNum">  583</span>              : 			case &#039;&#092;&quot;&#039;: </span>
<span class="lineNum">  584</span><span class="lineCov">      1  /   1: 				dst = escapeHelper(dst, &quot;&amp;quot;&quot;); </span>
<span class="lineNum">  585</span><span class="lineCov">      1  /   1: 				break; </span>
<span class="lineNum">  586</span>              : 			case &#039;&#092;&#039;&#039;: </span>
<span class="lineNum">  587</span><span class="lineCov">      1  /   1: 				dst = escapeHelper(dst, &quot;&amp;#039;&quot;); </span>
<span class="lineNum">  588</span><span class="lineCov">      1  /   1: 				break; </span>
<span class="lineNum">  589</span>              : 			case &#039;&#047;&#039;: </span>
<span class="lineNum">  590</span><span class="lineCov">      1  /   1: 				dst = escapeHelper(dst, &quot;&amp;#047;&quot;); </span>
<span class="lineNum">  591</span><span class="lineCov">      1  /   1: 				break; </span>
<span class="lineNum">  592</span>              : 			case &#039;&#092;&#092;&#039;: </span>
<span class="lineNum">  593</span><span class="lineNoCov">      0  /   1: 				dst = escapeHelper(dst, &quot;&amp;#092;&quot;); </span>
<span class="lineNum">  594</span><span class="lineNoCov">      0  /   1: 				break; </span>
<span class="lineNum">  595</span>              : 			case &#039;&#092;n&#039;: case &#039;&#092;r&#039;: </span>
<span class="lineNum">  596</span><span class="lineCov">      1  /   1: 				dst = escapeHelper(dst, &quot; &quot;); </span>
<span class="lineNum">  597</span><span class="lineCov">      1  /   1: 				break; </span>
<span class="lineNum">  598</span>              : 			default: </span>
<span class="lineNum">  599</span><span class="lineCov">      1  /   1: 				*dst = c; </span>
<span class="lineNum">  600</span><span class="lineCov">      1  /   1: 				dst++; </span>
<span class="lineNum">  601</span><span class="lineCov">      1  /   1: 				break; </span>
<span class="lineNum">  602</span>              : 			} </span>
<span class="lineNum">  603</span>              : 		} </span>
<span class="lineNum">  604</span>              :  </span>
<span class="lineNum">  605</span><span class="lineCov">      1  /   1: 		return std::string(buf); </span>
<span class="lineNum">  606</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  607</span>              :  </span>
<span class="lineNum">  608</span><span class="lineCov">      1  /   1: 	void writeHelperFiles(std::string dir) </span>
<span class="lineNum">  609</span>              : 	{ </span>
<span class="lineNum">  610</span><span class="lineCov">      1  /   1: 		write_file(icon_ruby, sizeof(icon_ruby), &quot;%s&#047;ruby.png&quot;, dir.c_str()); </span>
<span class="lineNum">  611</span><span class="lineCov">      1  /   1: 		write_file(icon_amber, sizeof(icon_amber), &quot;%s&#047;amber.png&quot;, dir.c_str()); </span>
<span class="lineNum">  612</span><span class="lineCov">      1  /   1: 		write_file(icon_emerald, sizeof(icon_emerald), &quot;%s&#047;emerald.png&quot;, dir.c_str()); </span>
<span class="lineNum">  613</span><span class="lineCov">      1  /   1: 		write_file(icon_snow, sizeof(icon_snow), &quot;%s&#047;snow.png&quot;, dir.c_str()); </span>
<span class="lineNum">  614</span><span class="lineCov">      1  /   1: 		write_file(icon_glass, sizeof(icon_glass), &quot;%s&#047;glass.png&quot;, dir.c_str()); </span>
<span class="lineNum">  615</span><span class="lineCov">      1  /   1: 		write_file(css_text, sizeof(css_text), &quot;%s&#047;bcov.css&quot;, dir.c_str()); </span>
<span class="lineNum">  616</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  617</span>              :  </span>
<span class="lineNum">  618</span><span class="linePartCov">      2  /   3: 	void onStartup() </span>
<span class="lineNum">  619</span>              : 	{ </span>
<span class="lineNum">  620</span><span class="linePartCov">      1  /   2: 		writeHelperFiles(m_indexDirectory); </span>
<span class="lineNum">  621</span><span class="linePartCov">      1  /   2: 		writeHelperFiles(m_outDirectory); </span>
<span class="lineNum">  622</span><span class="lineCov">      1  /   1: 	} </span>
<span class="lineNum">  623</span>              :  </span>
<span class="lineNum">  624</span>              :  </span>
<span class="lineNum">  625</span>              : 	std::string m_outDirectory; </span>
<span class="lineNum">  626</span>              : 	std::string m_indexDirectory; </span>
<span class="lineNum">  627</span>              : 	std::string m_summaryDbFileName; </span>
<span class="lineNum">  628</span>              : }; </span>
<span class="lineNum">  629</span>              :  </span>
<span class="lineNum">  630</span>              : namespace kcov </span>
<span class="lineNum">  631</span>              : { </span>
<span class="lineNum">  632</span>              : 	IWriter &amp;createHtmlWriter(IFileParser &amp;parser, IReporter &amp;reporter, IOutputHandler &amp;output) </span>
<span class="lineNum">  633</span><span class="lineCov">      1  /   1: 	{ </span>
<span class="lineNum">  634</span><span class="lineCov">      1  /   1: 		return *new HtmlWriter(parser, reporter, output); </span>
<span class="lineNum">  635</span><span class="linePartCov">      1  /   2: 	} </span>
<span class="lineNum">  636</span>              : } </span>
</pre>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr><td class="ruler"><img src="glass.png" width="3" height="3" alt=""/></td></tr>
  <tr><td class="versionInfo">Generated by: <a href="http://simonkagstrom.github.com/kcov/index.html">Kcov</a></td></tr>
</table>
<br/>
</body>
</html>
